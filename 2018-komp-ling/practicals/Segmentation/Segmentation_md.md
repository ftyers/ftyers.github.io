
# Segmentation

1) Donwload wiki.txt according to instructions, place it to C:\input in my PC

2) Import necessary libraries


```python
from nltk.tokenize import sent_tokenize
import random
```

3) Extract 50 random non empty lines from wiki.txt and segment them with nltk


```python
with open('C://mcl2018_hw1_babakov//practicals//Segmentation//wiki.txt','r',encoding = 'utf-8') as wiki:
    data = wiki.read();
    lines = data.splitlines()
    non_empty_lines = []
    for line in lines:#filter all empty lines
        if(line):
            non_empty_lines.append(line)
    tokenized_lines = []
    random.seed(42)
    rand_lines = random.sample(non_empty_lines, 50)
    for line in rand_lines:
        tokenized_line = sent_tokenize(line)
        tokenized_lines.append(tokenized_line)
    sep_sentences = 0
    print_count = 0 
    
    for tok_line in tokenized_lines:
        sep_sentences += len(tok_line)
        if (print_count < 15):
            print (tok_line, '\n')
            print_count += 1
    print("segmented sentences: ",sep_sentences)
```

    ['Согласно Конституции, законодательную власть осуществляет Федеральное собрание\xa0— парламент, состоящий из двух палат Совета Федерации и Государственной думы, в научной литературе данные палаты называются верхней и нижней соответственно.', 'В Совет Федерации входят по два представителя от каждого субъекта федерации.', 'В 1993 году члены Совета Федерации были избраны населением, в 1995 году их место заняли непосредственно губернаторы (президенты) и спикеры региональных законодательных собраний, а с 2000 года\xa0— назначаемые и избираемые представители соответственно исполнительного и законодательного органов власти субъектов федерации.', 'Государственная дума состоит из 450 депутатов, избираемых всенародным голосованием по партийным спискам сроком на 5 лет (до 31 декабря 2008 года\xa0— на 4 года).'] 
    
    ['Литва\xa0— парламентская республика, с характерными чертами президентской республики.', 'Срок полномочий избираемого всенародно Президента\xa0— 5 лет.', 'На данный момент президентом Литовской Республики является избранная в 2009 году и переизбранная в 2014 году Даля Грибаускайте.'] 
    
    ['В отличие от теории Юнга, в соционике считается, что одна из психических функций "всегда" является господствующей и отчасти подавляет остальные.', 'Тогда, с учётом «дополнительной» функции, «восемь наглядных психических типов» Юнга дают шестнадцать «соционических типов» (типов «информационного метаболизма», ТИМ).', 'Среди социоников не существует однозначного понимания, чем является «тип информационного метаболизма», а отсутствие объективных критериев определения соционического типа является основной проблемой соционики.'] 
    
    ['</doc>'] 
    
    ['В условиях естественного обитания рацион питания слонов напрямую зависит от региона их обитания.', 'Слоны, живущие на юге Индии, к примеру, любят жевать листву фикуса, слоны же, обитающие в Зимбабве, потребляют совсем другие растения.', 'Источник пищи слонов меняется также в зависимости от сезонов засухи или дождей.', 'Вообще же в рацион этих животных входят листья, кора и плоды различных деревьев, трава, которая удовлетворяет их потребность в минералах.'] 
    
    ['Основными потребителями российского экспорта являются, по состоянию на 2015 год, Нидерланды (11,9\xa0% от общего объёма), Китай (8,3\xa0%), Германия (7,4\xa0%), Италия (6,5\xa0%), Турция (5,6\xa0%).', 'Бо́льшая часть импорта поступает из Китая (19,2\xa0%), Германии (11,2\xa0%), США (6,4\xa0%), Белоруссии (4,8\xa0%), Италии (4,6\xa0%).'] 
    
    ['После выборов в Государственную думу начались многократные массовые политические выступления граждан России.', 'Они продолжались во время кампании по выборам Президента России и после состоявшихся 4 марта 2012 года президентских выборов, на которых В.\xa0В.\xa0Путин официально победил в первом туре.', 'Участники акций заявляли, что выборы сопровождались нарушениями законодательства и массовыми фальсификациями.', 'Выступления также имели антипутинскую направленность.'] 
    
    ['Синьхайская революция ослабила влияние Китая в Монголии, в противовес этому Монголия стремится опереться на Россию и уже с 1912 года фактически становится протекторатом.'] 
    
    ['Объявленная пришедшим в 1985 году к власти в СССР Михаилом Горбачёвым политика Перестройки привела к утрате руководящей роли КПСС, масштабным переменам в идеологии, подрыву экономики и дестабилизации жизни в стране.', 'Провозглашенной целью реформ была всесторонняя демократизация сложившегося в СССР общественно-политического и экономического строя и ослабление идеологического контроля над обществом, при этом реформы фактически привели к гибели социалистического строя и распаду страны.', 'По мнению зарубежных исследователей, распад СССР не был неизбежен, государство имело значительные возможности для сохранения социалистического строя, единства страны и усиления влияния в мире при условии выбора руководством СССР менее катастрофичной модели реформирования.', 'В 1989 году произошёл распад Организации Варшавского договора и СЭВ.', 'В 1988—1991 годах произошел ряд законодательных конфликтов между союзным центром и союзными республиками.В декабре 1989 года на саммите на о. Мальта Горбачёв и Буш официально объявили об окончании холодной войны.'] 
    
    ['Но одновременно быстрыми темпами шёл рост местного населения (см.', 'ниже\xa0— агломерация).', 'Всё это начало создавать большую антропогенную нагрузку на экологию КМВ (см.', 'Пятигорск).', 'Стал ощущаться и некоторый дефицит минеральных ресурсов.', 'Чрезмерное развитие промышленности в городах-курортах, не связанной с лечебно-оздоровительными (санаторно-курортными) целями, применение ядохимикатов и синтетических удобрений в сельском хозяйстве также представляло реальную угрозу загрязнения гидроминеральных богатств уникального курорта.', 'Это не могло не тревожить представителей курортологии, руководство Ставропольского края, российское правительство.<br> Вот почему 27 марта 1992 года и был подписан Указ Президента Российской Федерации Б.\xa0Н.\xa0Ельцина, согласно которому Кавминводы являются особо охраняемым эколого-курортным регионом Российской Федерации.', 'В нём прямо были определены цели создания региона: сохранение природных богатств курортов КМВ\xa0— всемирно известной местности с уникальными оздоровительными и лечебными факторами, неповторимым историко-архитектурным и культурным обликом.'] 
    
    ['Фольклор продолжал развиваться и после распространения письменной литературы, оставаясь важным элементом древнерусской культуры.', 'В последующие столетия многие писатели и поэты использовали сюжеты устной поэзии и арсенал её художественных средств и приёмов.'] 
    
    ['Согласно реформе образования, с 1 сентября 2015 года будут отменены школы среднего типа — с этого момента образовательные школы будут разделены на начальные, прогимназии, основные школы и гимназии.'] 
    
    ['6 февраля 2003 года начато регулярное движение поезда комбинированного транспорта «Викинг».', '<br>'] 
    
    ['Президентские выборы 1996 года были единственными в российской истории, когда для определения победителя понадобился второй тур выборов, в результате которого Б.\xa0Н.\xa0Ельцин, в начале предвыборной гонки значительно отстающий от своего оппонента, опередил лидера КПРФ Г.\xa0А.\xa0Зюганова, при этом на выборах отмечались значительные нарушения.'] 
    
    ['Слоновые хорошо слышат в области низких частот, вплоть до инфразвука, но наибольшая чувствительность их слуха на частоте около .', 'Слоны обладают музыкальным слухом и музыкальной памятью, способны различать мелодии из трёх нот, музыку на скрипке и низкие звуки баса и рога предпочитают высоким флейтовым мелодиям.'] 
    
    segmented sentences:  164
    

Examples of bad results from nltk

'Но одновременно быстрыми темпами шёл рост местного населения (см.',

'ниже\xa0— агломерация).', 

'Всё это начало создавать большую антропогенную нагрузку на экологию КМВ (см.', 'Пятигорск).'


```python
with open("C:\mcl2018_hw1_babakov\practicals\Segmentation\wiki_50.txt", 'w',encoding = 'utf-8') as f:
    for t in tokenized_lines:
        f.write(''.join(str(s) for s in t) + '\n')
```

4) Run ruby script for segmentation, output results as output_ruby. Calculate number of segmented lines 


```python
with open('C://mcl2018_hw1_babakov//practicals//Segmentation//output_ruby.txt','r',encoding = 'utf-8') as ruby:
    data = ruby.read();
    lines = data.splitlines()
    print("Number of sentences segmented by ruby is ",len(lines))
```

    Number of sentences segmented by ruby is  177
    

Examples of bad results from ruby script

Вот почему 27 марта 1992 года и был подписан Указ Президента Российской Федерации Б.

 Н.
 
 Ельцина, согласно которому Кавминводы являются особо охраняемым эколого-курортным регионом Российской Федерации.

# Conclusion

I have calculated real amount of sentences manually. It equals 153

NLTK segmentation turned to be more accurate becuase it made only 164 - 153 = 11 non existing sentences

Meanwhile python script made 177 - 153 = 24 non existing sentences

NLTK main mistakes were about abbreviations of short words
Ruby scrip main mistkes were about name abbreviation
